const mongoose = require('mongoose');\nconst bcrypt = require('bcryptjs');\n\nconst userSchema = new mongoose.Schema({\n    userId: { type: mongoose.Schema.Types.ObjectId, auto: true },\n    name: { type: String, required: true },\n    email: { type: String, required: true, unique: true, lowercase: true },\n    password: { type: String, required: true },\n    role: { type: String, enum: ['admin', 'agent', 'manager', 'viewer'], required: true },\n    department: { type: String },\n    createdAt: { type: Date, default: Date.now },\n    updatedAt: { type: Date, default: Date.now }\n});\n\n// Middleware to hash password before saving user\nuserSchema.pre('save', async function(next) {\n    if (!this.isModified('password')) return next();\n    this.password = await bcrypt.hash(this.password, 10);\n    next();\n});\n\n// Method to compare password\nuserSchema.methods.comparePassword = async function(candidatePassword) {\n    return await bcrypt.compare(candidatePassword, this.password);\n};\n\nconst User = mongoose.model('User', userSchema);\nmodule.exports = User;\n